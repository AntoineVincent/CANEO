{% extends 'base.html.twig' %}

{% block body %}

	<div class="col-md-12">
		<div class="col-md-12">
			<h3 class="form-title">Liste des Produits existant</h3>
			<table id="table">
				<thead>
					<tr>
						<th>Nom du Produit</th>
						<th>Etat</th>
						{% if user.type == 'fournisseur' or user.type == 'admin' %}
							<th>Prix Maximal de Depart</th>
						{% endif %}
						{% if user.type == 'acheteur' %}
							<th>Commande Minimal</th>
							<th>Favoris : </th>
						{% endif %}
						<th>Voir Fiche</th>
					</tr>
				</thead>
				<tbody>
					{% for product in products %}
						<tr>
							<th>{{ product.nom }}</th>
							{% if product.enchere == "oui" %}
								<th>Une vente est en cours</th>
							{% else %}
								<th>Aucune vente en cours</th>
							{% endif %}
							{% if user.type == 'fournisseur' or user.type == 'admin' %}
								<th>ce produit ne peut pas dépasser : {{ product.prixminimal }}€/unité</th>
							{% endif %}
							{% if user.type == 'acheteur' %}	
								<th>{{ product.commandemaximal }}</th>
								{% if product.favoris == "oui" %}
									<th style="text-align:center;"><span class="glyphicon glyphicon-star"></span></th>
								{% else %}
									<th style="text-align:center;"><span class="glyphicon glyphicon-star-empty"></span></th>
								{% endif %}
							{% endif %}
							<th><a href="{{ path('fiche_product', { 'idproduct': product.id }) }}">Fiche produit</a></th>
						</tr>
					{% endfor %}
				</tbody>
			</table>

			<script>
				$(document).ready( function () {
		    		$('#table').DataTable();
				} );
			</script>
		</div>
	</div>

{% endblock %}